@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

<div class="dashboard-container container-fluid pt-4">
    <h2 class="text-center mb-4">@Localizer["DashboardTitle"]</h2>

    <div class="search-filter-bar mb-4 d-flex gap-3 flex-wrap justify-content-center">
        <select class="form-select w-auto" id="statusSelect" onchange="applyFilters()">
            <option value="All">@Localizer["AllStatus"]</option>
            <option value="Open">@Localizer["Open"]</option>
            <option value="InProgress">@Localizer["InProgress"]</option>
            <option value="Closed">@Localizer["Closed"]</option>
        </select>
    </div>

    <table class="table table-bordered table-hover text-center align-middle">
        <thead class="table-secondary">
            <tr>
                <th>@Localizer["HeaderActions"]</th>
                <th>@Localizer["HeaderStatus"]</th>
                <th>@Localizer["HeaderLocation"]</th>
                <th>@Localizer["HeaderDate"]</th>
                <th>@Localizer["HeaderType"]</th>
                <th>@Localizer["HeaderReference"]</th>
            </tr>
        </thead>
        <tbody>
            @* Sample static rows, for demo/testing purpose *@
            <tr>
                <td>
                    <a href="#" class="btn btn-sm btn-primary">@Localizer["ActionView"]</a>
                    <a href="#" class="btn btn-sm btn-success">@Localizer["ActionEdit"]</a>
                </td>
                <td><span class="badge bg-warning text-dark">Open</span></td>
                <td>Headquarters</td>
                <td>@DateTime.Now.ToString("yyyy-MM-dd")</td>
                <td>Compliance</td>
                <td>REF-123456</td>
            </tr>
            <tr>
                <td>
                    <a href="#" class="btn btn-sm btn-primary">@Localizer["ActionView"]</a>
                    <a href="#" class="btn btn-sm btn-success">@Localizer["ActionEdit"]</a>
                </td>
                <td><span class="badge bg-info text-dark">InProgress</span></td>
                <td>Branch Office</td>
                <td>@DateTime.Now.AddDays(-3).ToString("yyyy-MM-dd")</td>
                <td>Safety</td>
                <td>REF-654321</td>
            </tr>
            <tr>
                <td>
                    <a href="#" class="btn btn-sm btn-primary">@Localizer["ActionView"]</a>
                    <a href="#" class="btn btn-sm btn-success">@Localizer["ActionEdit"]</a>
                </td>
                <td><span class="badge bg-success">Closed</span></td>
                <td>Warehouse</td>
                <td>@DateTime.Now.AddDays(-10).ToString("yyyy-MM-dd")</td>
                <td>Financial</td>
                <td>REF-987654</td>
            </tr>
            <tr>
                <td>
                    <a href="#" class="btn btn-sm btn-primary">@Localizer["ActionView"]</a>
                    <a href="#" class="btn btn-sm btn-success">@Localizer["ActionEdit"]</a>
                </td>
                <td><span class="badge bg-warning text-dark">Open</span></td>
                <td>Remote Site</td>
                <td>@DateTime.Now.AddDays(-1).ToString("yyyy-MM-dd")</td>
                <td>Operations</td>
                <td>REF-112233</td>
            </tr>

            @* Actual dynamic data rows *@
            @foreach (var item in Model)
            {
                var badgeClass = item.Status switch
                {
                    "Open" => "bg-warning text-dark",
                    "InProgress" => "bg-info text-dark",
                    "Closed" => "bg-success",
                    _ => "bg-secondary"
                };

                <tr>
                    <td>
                        <a href="@item.ActionUrl" class="btn btn-sm btn-primary">@Localizer["ActionView"]</a>
                        <a href="@item.EditUrl" class="btn btn-sm btn-success">@Localizer["ActionEdit"]</a>
                    </td>
                    <td><span class="badge @badgeClass">@item.Status</span></td>
                    <td>@item.Location</td>
                    <td>@item.Date.ToString("yyyy-MM-dd")</td>
                    <td>@item.Type</td>
                    <td>@item.Reference</td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section Scripts {
    <script>
        function applyFilters() {
            const status = document.getElementById('statusSelect').value;
            const url = new URL(window.location.href);
            url.searchParams.set("status", status);
            window.location.href = url;
        }
    </script>
}
